--DLV schema
CREATE TABLE DLV.SERVICETIME
(
  SERVICETIME_TYPE       VARCHAR2(8 BYTE)       NOT NULL,
  ZONE_TYPE              VARCHAR2(16 BYTE)      NOT NULL,
  FIXED_SERVICE_TIME     NUMBER(10,2),
  VARIABLE_SERVICE_TIME  NUMBER(10,2)
);

ALTER TABLE DLV.SERVICETIME ADD ( CONSTRAINT PK_SERVICETIME PRIMARY KEY (SERVICETIME_TYPE, ZONE_TYPE));

CREATE UNIQUE INDEX DLV.PK_SERVICETIME ON DLV.SERVICETIME (SERVICETIME_TYPE, ZONE_TYPE);

GRANT ALL ON DLV.SERVICETIME TO fdstore_stprd01;
GRANT ALL ON DLV.SERVICETIME TO fdtrn_stprd01;
GRANT SELECT ON DLV.SERVICETIME TO appdev;

ALTER TABLE DLV.SERVICETIME_SCENARIO ADD (DEFAULT_SERVICETIME_TYPE  VARCHAR2(8 BYTE), DEFAULT_ZONE_TYPE  VARCHAR2(16 BYTE));

--TRANSP schema
CREATE TABLE TRANSP.TRN_ZONE
(
  ZONE_ID        VARCHAR2(16 BYTE),
  ZONE_NUMBER    VARCHAR2(16 BYTE),
  NEIGHBORHOOD   VARCHAR2(24 BYTE),
  SUPERVISOR_ID  VARCHAR2(16 BYTE),
  OBSOLETE       VARCHAR2(1 BYTE),
  ZONE_TYPE      VARCHAR2(16 BYTE),
  AREA           VARCHAR2(8 BYTE)
);

ALTER TABLE TRANSP.TRN_ZONE ADD ( CONSTRAINT TRN_ZONE_PK PRIMARY KEY (ZONE_ID));

CREATE UNIQUE INDEX TRANSP.TRN_ZONE_PK ON TRANSP.TRN_ZONE (ZONE_ID);

GRANT ALL ON TRANSP.TRN_ZONE TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_ZONE TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_ZONE TO appdev;

CREATE TABLE TRANSP.TRN_DISPATCH
(
  DISPATCH_DATE    DATE,
  ROUTE_ID         VARCHAR2(16 BYTE),
  ROUTE_NUMBER     VARCHAR2(16 BYTE),
  TRUCK_ID         VARCHAR2(16 BYTE),
  LICENSE_PLATE    VARCHAR2(16 BYTE),
  DRIVER_ID        VARCHAR2(16 BYTE),
  DRIVER_NAME      VARCHAR2(60 BYTE),
  HELPER1_ID       VARCHAR2(16 BYTE),
  HELPER1_NAME     VARCHAR2(60 BYTE),
  HELPER2_ID       VARCHAR2(16 BYTE),
  HELPER2_NAME     VARCHAR2(60 BYTE),
  ZONE_ID          VARCHAR2(16 BYTE),
  SLOT_ID          VARCHAR2(16 BYTE),
  SLOT_NAME        VARCHAR2(16 BYTE),
  ZONE_NUMBER      VARCHAR2(16 BYTE),
  NEXTEL_ID        VARCHAR2(16 BYTE),
  PLAN_ID          NUMBER,
  SUPERVISOR_NAME  VARCHAR2(48 BYTE),
  SUPERVISOR_ID    VARCHAR2(16 BYTE),
  COMMENTS         VARCHAR2(1024 BYTE),
  STATUS           VARCHAR2(16 BYTE),
  END_SLOT_ID      VARCHAR2(16 BYTE)
);

GRANT ALL ON TRANSP.TRN_DISPATCH TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_DISPATCH TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_DISPATCH TO appdev;

CREATE TABLE TRANSP.TRN_DISPATCH_PLAN
(
  DISPATCH_DAY     VARCHAR2(16 BYTE),
  ZONE_ID          VARCHAR2(16 BYTE),
  ZONE_NUMBER      VARCHAR2(16 BYTE),
  SLOT_ID          VARCHAR2(16 BYTE),
  SLOT_NAME        VARCHAR2(16 BYTE),
  DRIVER_ID        VARCHAR2(16 BYTE),
  DRIVER_NAME      VARCHAR2(48 BYTE),
  HELPER1_ID       VARCHAR2(16 BYTE),
  HELPER1_NAME     VARCHAR2(48 BYTE),
  HELPER2_ID       VARCHAR2(16 BYTE),
  HELPER2_NAME     VARCHAR2(48 BYTE),
  PLAN_ID          NUMBER,
  SUPERVISOR_ID    VARCHAR2(16 BYTE),
  SUPERVISOR_NAME  VARCHAR2(48 BYTE),
  PLAN_DATE        DATE,
  END_SLOT_ID      VARCHAR2(16 BYTE)
)

GRANT ALL ON TRANSP.TRN_DISPATCH_PLAN TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_DISPATCH_PLAN TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_DISPATCH_PLAN TO appdev;

CREATE TABLE TRANSP.TRN_EMPLOYEE
(
  EMPLOYEE_ID     VARCHAR2(16 BYTE)             NOT NULL,
  SUPERVISOR_ID   VARCHAR2(16 BYTE),
  EMPLOYEENUMBER  VARCHAR2(10 BYTE),
  FIRST_NAME      VARCHAR2(20 BYTE),
  LAST_NAME       VARCHAR2(30 BYTE),
  JOB_TYPE_ID     VARCHAR2(16 BYTE),
  HIRE_DATE       DATE,
  TERMINATE_DATE  DATE,
  OBSOLETE        VARCHAR2(1 BYTE)
);

ALTER TABLE TRANSP.TRN_EMPLOYEE ADD ( CONSTRAINT TRN_EMPLOYEE_PK PRIMARY KEY (EMPLOYEE_ID));

CREATE UNIQUE INDEX TRANSP.TRN_EMPLOYEE_PK ON TRANSP.TRN_EMPLOYEE(EMPLOYEE_ID);

GRANT ALL ON TRANSP.TRN_EMPLOYEE TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_EMPLOYEE TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_EMPLOYEE TO appdev;

CREATE TABLE TRANSP.TRN_EMPLOYEE_JOB_TYPE
(
  JOB_TYPE_ID      VARCHAR2(16 BYTE)            NOT NULL,
  JOB_TYPE_NAME    VARCHAR2(20 BYTE)            NOT NULL,
  JOB_DESCRIPTION  VARCHAR2(60 BYTE)
);

ALTER TABLE TRANSP.TRN_EMPLOYEE_JOB_TYPE ADD ( CONSTRAINT TRN_EMPLOYEE_JOB_TYPE_PK PRIMARY KEY (JOB_TYPE_ID));

CREATE UNIQUE INDEX TRANSP.TRN_EMPLOYEE_JOB_TYPE_PK ON TRANSP.TRN_EMPLOYEE_JOB_TYPE (JOB_TYPE_ID);

GRANT ALL ON TRANSP.TRN_EMPLOYEE_JOB_TYPE TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_EMPLOYEE_JOB_TYPE TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_EMPLOYEE_JOB_TYPE TO appdev;

CREATE TABLE TRANSP.TRN_EMPLOYEEASSIGNMENT
(
  EMPLOYEEASSIGNMENTID  CHAR(16 BYTE)           NOT NULL,
  EMPLOYEE_ID           CHAR(16 BYTE),
  ROUTE_ID              CHAR(16 BYTE),
  ASSIGN_DATE           DATE                    NOT NULL
);

CREATE UNIQUE INDEX TRANSP.PK7 ON TRANSP.TRN_EMPLOYEEASSIGNMENT(EMPLOYEEASSIGNMENTID);

GRANT ALL ON TRANSP.TRN_EMPLOYEEASSIGNMENT TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_EMPLOYEEASSIGNMENT TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_EMPLOYEEASSIGNMENT TO appdev;

CREATE TABLE TRANSP.TRN_ROUTE
(
  ROUTE_ID       VARCHAR2(16 BYTE)              NOT NULL,
  ZONE_ID        VARCHAR2(16 BYTE),
  ROUTE_AM_PM    VARCHAR2(2 BYTE)               NOT NULL,
  SUPERVISOR_ID  VARCHAR2(16 BYTE),
  ROUTE_NUMBER   VARCHAR2(6 BYTE),
  OBSOLETE       VARCHAR2(1 BYTE)
);

ALTER TABLE TRANSP.TRN_ROUTE ADD ( CONSTRAINT REFTRN_DELIVERYZONE 
 FOREIGN KEY (ZONE_ID) REFERENCES TRANSP.TRN_ZONE (ZONE_ID),  CONSTRAINT REFTRN_SUPERVISOR FOREIGN KEY (SUPERVISOR_ID) 
 REFERENCES TRANSP.TRN_EMPLOYEE (EMPLOYEE_ID));
 
ALTER TABLE TRANSP.TRN_ROUTE ADD ( CONSTRAINT TRN_ROUTE_PK PRIMARY KEY (ROUTE_ID));

CREATE UNIQUE INDEX TRANSP.TRN_ROUTE_PK ON TRANSP.TRN_ROUTE(ROUTE_ID); 

GRANT ALL ON TRANSP.TRN_ROUTE TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_ROUTE TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_ROUTE TO appdev;

CREATE TABLE TRANSP.TRN_ROUTENUMBER
(
  ROUTE_DATE     DATE                           NOT NULL,
  CUTOFF_ID      VARCHAR2(16 BYTE)              NOT NULL,
  AREA_CODE      VARCHAR2(8 BYTE)               NOT NULL,
  CURRENT_VALUE  NUMBER                         NOT NULL
);

ALTER TABLE TRANSP.TRN_ROUTENUMBER ADD ( CONSTRAINT PK_TRN_ROUTENUMBER PRIMARY KEY (ROUTE_DATE, CUTOFF_ID, AREA_CODE));

CREATE UNIQUE INDEX TRANSP.PK_TRN_ROUTENUMBER ON TRANSP.TRN_ROUTENUMBER (ROUTE_DATE, CUTOFF_ID, AREA_CODE);

GRANT ALL ON TRANSP.TRN_ROUTENUMBER TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_ROUTENUMBER TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_ROUTENUMBER TO appdev;

CREATE TABLE TRANSP.TRN_TRUCK
(
  TRUCK_ID       VARCHAR2(16 BYTE)              NOT NULL,
  TRUCK_TYPE     VARCHAR2(10 BYTE),
  LICENSE_PLATE  VARCHAR2(20 BYTE)              NOT NULL,
  TRUCK_NUMBER   VARCHAR2(6 BYTE),
  OBSOLETE       VARCHAR2(1 BYTE)
);

ALTER TABLE TRANSP.TRN_TRUCK ADD ( CONSTRAINT TRN_TRUCK_PK PRIMARY KEY (TRUCK_ID));

CREATE UNIQUE INDEX TRANSP.TRN_TRUCK_PK ON TRANSP.TRN_TRUCK(TRUCK_ID);

GRANT ALL ON TRANSP.TRN_TRUCK TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_TRUCK TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_TRUCK TO appdev;


CREATE TABLE TRANSP.TRN_TRUCKASSIGNMENT
(
  TRUCKASSIGNMENT_ID  CHAR(16 BYTE)             NOT NULL,
  ROUTE_ID            CHAR(16 BYTE),
  TRUCK_ID            CHAR(16 BYTE),
  ASSIGN_DATE         DATE
);

CREATE UNIQUE INDEX TRANSP.PK8 ON TRANSP.TRN_TRUCKASSIGNMENT (TRUCKASSIGNMENT_ID);

GRANT ALL ON TRANSP.TRN_TRUCKASSIGNMENT TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_TRUCKASSIGNMENT TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_TRUCKASSIGNMENT TO appdev;


CREATE TABLE TRANSP.TRN_TIMESLOT
(
  SLOT_ID    VARCHAR2(16 BYTE),
  SLOT_NAME  VARCHAR2(16 BYTE)
);

ALTER TABLE TRANSP.TRN_TIMESLOT ADD ( CONSTRAINT TRN_TIMESLOT_PK PRIMARY KEY (SLOT_ID));

CREATE UNIQUE INDEX TRANSP.TRN_TIMESLOT_PK ON TRANSP.TRN_TIMESLOT(SLOT_ID);

GRANT ALL ON TRANSP.TRN_TIMESLOT TO fdstore_stprd01;
GRANT ALL ON TRANSP.TRN_TIMESLOT TO fdtrn_stprd01;
GRANT SELECT ON TRANSP.TRN_TIMESLOT TO appdev;
