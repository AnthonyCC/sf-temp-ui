--
-- PAYMENTMETHOD  (Table)  
-- REPLACES CREDITCARD TABLE  
--
ALTER TABLE CUST.CREDITCARD RENAME TO PAYMENTMETHOD;

ALTER TABLE CUST.PAYMENTMETHOD MODIFY (EXPIRATION_DATE NULL) MODIFY (CARD_TYPE NULL);

ALTER TABLE CUST.PAYMENTMETHOD ADD ABA_ROUTE_NUMBER VARCHAR2(9) ADD PAYMENT_METHOD_TYPE VARCHAR2(2) ADD BANK_NAME VARCHAR2(80) ADD BANK_ACCOUNT_TYPE VARCHAR2(1);

CREATE SYNONYM CUST.CREDITCARD FOR CUST.PAYMENTMETHOD; 

--
-- PM_ABA_ACCT_IDX  (Index) 
--
CREATE INDEX CUST.PM_ACCT_ABA_IDX ON CUST.PAYMENTMETHOD(BANK_ACCOUNT_TYPE, ACCOUNT_NUMBER, ABA_ROUTE_NUMBER);
CREATE INDEX CUST.PM_ACCT_ID_IDX ON CUST.PAYMENTMETHOD(ACCOUNT_NUMBER, ID);
CREATE INDEX CUST.PM_CUST_IDX ON CUST.PAYMENTMETHOD(CUSTOMER_ID);

--
-- PAYMENTMETHODTRANSACTIONS  (Table)  
-- REPLACES CREDITCARDTRANSACTIONS TABLE  
--
ALTER TABLE CUST.CREDITCARDTRANSACTIONS RENAME TO PAYMENTMETHODTRANSACTIONS;

CREATE SYNONYM CUST.CREDITCARDTRANSACTIONS FOR CUST.PAYMENTMETHODTRANSACTIONS; 

--
-- PAYMENT  (Table) 
--

PAYMENT

ALTER TABLE CUST.PAYMENT ADD ABA_ROUTE_NUMBER VARCHAR2(9) ADD PAYMENT_METHOD_TYPE VARCHAR2(2) ADD BANK_NAME VARCHAR2(80) ADD BANK_ACCOUNT_TYPE VARCHAR2(1) ADD IS_CHARGE_PAYMENT VARCHAR2(1);

--
-- PAYMENTINFO  (Table) 
--

ALTER TABLE CUST.PAYMENTINFO MODIFY (EXPIRATION_DATE NULL) MODIFY (CARD_TYPE NULL);

ALTER TABLE CUST.PAYMENTINFO ADD ABA_ROUTE_NUMBER VARCHAR2(9) ADD PAYMENT_METHOD_TYPE VARCHAR2(2) ADD BANK_NAME VARCHAR2(80) ADD BANK_ACCOUNT_TYPE VARCHAR2(1);

--
-- SETTLEMENT_DETAIL  (Table) 
--

ALTER TABLE CUST.SETTLEMENT_DETAIL MODIFY (CARD_TYPE NULL);
ALTER TABLE CUST.SETTLEMENT_DETAIL ADD PAYMENT_METHOD_TYPE VARCHAR2(2);

--
-- CUSTOMER
--
ALTER TABLE CUST.CUSTOMER ADD ON_ALERT VARCHAR2(1);

--
-- ACTIVITY_LOG
--
ALTER TABLE CUST.ACTIVITY_LOG ADD NOTE VARCHAR2(256);

--
-- PROMOTION
--
ALTER TABLE CUST.PROMOTION ADD SAP_CODE VARCHAR2(16);


GRANT ALL PRIVILEGES on CUST.PAYMENTMETHOD to fdstore_prda;
GRANT ALL PRIVILEGES on CUST.PAYMENTMETHODTRANSACTIONS to fdstore_prda;
GRANT ALL PRIVILEGES on CUST.PAYMENTMETHOD to fdstore_prdb;
GRANT ALL PRIVILEGES on CUST.PAYMENTMETHODTRANSACTIONS to fdstore_prdb;

GRANT SELECT ON PAYLINX.EFT_TRANSACTION TO FDSTORE_PRDA;
GRANT SELECT ON PAYLINX.EFT_TRANSACTION TO FDSTORE_PRDB;
