CREATE TABLE CUST.RAF_CREDIT
(
ID             VARCHAR2(16 BYTE)              NOT NULL,
  ADVOCATE_CUSTOMER_ID           VARCHAR2(16 BYTE),
  STATUS                VARCHAR2(1 BYTE),
  CREATION_TIME  DATE,
  MODIFIED_TIME DATE,
  ADVOCATE_FIRST_NAME   VARCHAR2(50 BYTE),
  ADVOCATE_LAST_NAME    VARCHAR2(50 BYTE),
  ADVOCATE_EMAIL        VARCHAR2(80 BYTE),
  ADVOCATE_PARTNER_UID  VARCHAR2(50 BYTE),
  FRIEND_FIRST_NAME     VARCHAR2(50 BYTE),
  FRIEND_LAST_NAME      VARCHAR2(50 BYTE),
  FRIEND_EMAIL          VARCHAR2(80 BYTE),
  FRIEND_PARTNER_UID    VARCHAR2(50 BYTE),
  REWARD_TYPE           VARCHAR2(32 BYTE),
  REWARD_DATE           DATE,
  REWARD_SET_NAME       VARCHAR2(32 BYTE),
  REWARD_SET_ID         VARCHAR2(50 BYTE),
  REWARD_VALUE          NUMBER(8,2),
  REWARD_DETAIL         VARCHAR2(50 BYTE)
)TABLESPACE FDCUSDAT
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;



ALTER TABLE CUST.RAF_CREDIT ADD (
  CONSTRAINT RAF_CREDIT_PK
 PRIMARY KEY
 (ID)
    USING INDEX 
    TABLESPACE FDCUSDAT
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));

CREATE INDEX CUST.RAF_CREDIT_STATUS_IDX ON CUST.RAF_CREDIT
(STATUS)
LOGGING
TABLESPACE FDCUSIDX
PCTFREE    40
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;

ALTER TABLE CUST.RAF_CREDIT ADD CONSTRAINT UNQ_ADVOCATE_FRIEND
 UNIQUE (ADVOCATE_EMAIL, FRIEND_EMAIL)
 USING INDEX  
    TABLESPACE FDCUSDAT
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               );




CREATE SEQUENCE CUST.RAF_SEQ
  START WITH 1001
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER;
  
  

  
 


CREATE TABLE CUST.RAF_TRANS
(
  ID              VARCHAR2(16 BYTE)             NOT NULL,
  SALESACTION_ID  VARCHAR2(16 BYTE)             NOT NULL,
  TRANS_STATUS    CHAR(1 BYTE),
  TRANS_TYPE      VARCHAR2(100 BYTE),
  ERROR_MSG       VARCHAR2(255 BYTE),
  ERROR_DETAILS   VARCHAR2(255 BYTE),
  EXTOLE_EVENT_ID VARCHAR2(25 BYTE),
  CREATE_TIME     DATE,
  TRANS_TIME      DATE
)
TABLESPACE FDCUSDAT
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;



CREATE INDEX CUST.RAF_TRANS_TRANS_TIME_IDX ON CUST.RAF_TRANS
(TRANS_TIME)
LOGGING
TABLESPACE FDCUSDAT
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX CUST.RAF_TRANS_PK ON CUST.RAF_TRANS
(ID)
LOGGING
TABLESPACE FDCUSDAT
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE INDEX CUST.RAF_TRANS_SALESACTION_IDX ON CUST.RAF_TRANS
(SALESACTION_ID)
LOGGING
TABLESPACE FDCUSDAT
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE CUST.RAF_TRANS ADD (
  CONSTRAINT RAF_TRANS_PK
 PRIMARY KEY
 (ID)
    USING INDEX 
    TABLESPACE FDCUSDAT
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));

ALTER TABLE CUST.RAF_TRANS ADD (
  CONSTRAINT RAF_TRANS_FK1 
 FOREIGN KEY (SALESACTION_ID) 
 REFERENCES CUST.SALESACTION (ID));



  
alter table cust.fdcustomer add(raf_click_id varchar2(50 char), raf_promo_code varchar2(16 char));

alter table cust.promotion_new add(raf_promo_code varchar2(16 char));

CREATE INDEX CUST.RAF_PROMO_CODE_IDX ON CUST.PROMOTION_NEW
(RAF_PROMO_CODE)
LOGGING
TABLESPACE FDCUSDAT
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;

--Grants
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_CREDIT TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_CREDIT TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_CREDIT TO FDSTORE_STPRD01;
GRANT SELECT ON CUST.RAF_CREDIT TO APPDEV;
GRANT SELECT ON CUST.RAF_CREDIT TO APPDEV_ROLE;
GRANT SELECT ON CUST.RAF_CREDIT TO RO_CUST_ERPS;
GRANT SELECT ON CUST.RAF_CREDIT TO FDETLRO;
GRANT SELECT ON CUST.RAF_CREDIT TO CSSI;
GRANT SELECT ON CUST.RAF_CREDIT TO INTEGRIEN;


GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_TRANS TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_TRANS TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.RAF_TRANS TO FDSTORE_STPRD01;
GRANT SELECT ON CUST.RAF_TRANS TO APPDEV;
GRANT SELECT ON CUST.RAF_TRANS TO APPDEV_ROLE;
GRANT SELECT ON CUST.RAF_TRANS TO RO_CUST_ERPS;
GRANT SELECT ON CUST.RAF_TRANS TO FDETLRO;
GRANT SELECT ON CUST.RAF_TRANS TO CSSI;
GRANT SELECT ON CUST.RAF_TRANS TO INTEGRIEN;

GRANT SELECT ON CUST.RAF_SEQ TO FDSTORE_PRDA;
GRANT SELECT ON CUST.RAF_SEQ TO FDSTORE_PRDB;
GRANT SELECT ON CUST.RAF_SEQ TO FDSTORE_STPRD01;
GRANT SELECT ON CUST.RAF_SEQ TO APPDEV;
GRANT SELECT ON CUST.RAF_SEQ TO APPDEV_ROLE;
GRANT SELECT ON CUST.RAF_SEQ TO RO_CUST_ERPS;
GRANT SELECT ON CUST.RAF_SEQ TO FDETLRO;
GRANT SELECT ON CUST.RAF_SEQ TO CSSI;
GRANT SELECT ON CUST.RAF_SEQ TO INTEGRIEN;
