--------------- Start SERVICETIME_TYPE Table ----------------------------
CREATE TABLE SERVICETIME_TYPE
(
  CODE         VARCHAR2(8 BYTE)                 NOT NULL,
  NAME         VARCHAR2(32 BYTE)                NOT NULL,
  DESCRIPTION  VARCHAR2(256 BYTE)
);

ALTER TABLE SERVICETIME_TYPE ADD (CONSTRAINT PK_SERVICETIME_TYPE PRIMARY KEY (CODE));

ALTER TABLE SERVICETIME_TYPE ADD (UNIQUE (NAME));
--------------- End SERVICETIME_TYPE Table ----------------------------

--------------- Start SERVICETIME Table --------------------------------
CREATE TABLE SERVICETIME
(
  SERVICETIME_TYPE       VARCHAR2(8 BYTE)       NOT NULL,
  ZONE_TYPE              VARCHAR2(16 BYTE)      NOT NULL,
  FIXED_SERVICE_TIME     NUMBER(10,2),
  VARIABLE_SERVICE_TIME  NUMBER(10,2)
);

ALTER TABLE SERVICETIME ADD (CONSTRAINT PK_SERVICETIME PRIMARY KEY (SERVICETIME_TYPE,ZONE_TYPE)); 
               
ALTER TABLE SERVICETIME ADD (CONSTRAINT ACT_SERVICETIME_FK FOREIGN KEY (SERVICETIME_TYPE) REFERENCES SERVICETIME_TYPE (CODE)); 
--------------- End SERVICETIME Table ------------------------------------

--------------- Start SERVICETIME_SCENARIO Table --------------------------------

CREATE TABLE SERVICETIME_SCENARIO
(
  CODE                        VARCHAR2(8 BYTE)  NOT NULL,
  DESCRIPTION                 VARCHAR2(256 BYTE),
  IS_DEFAULT                  VARCHAR2(1 BYTE),
  SERVICETIME_FACTOR_FORMULA  VARCHAR2(256 BYTE),
  SERVICETIME_FORMULA         VARCHAR2(256 BYTE),
  DEFAULT_CARTONCOUNT         NUMBER(10,2),
  DEFAULT_CASECOUNT           NUMBER(10,2),
  DEFAULT_FREEZERCOUNT        NUMBER(10,2),
  ORDERSIZE_FORMULA           VARCHAR2(256 BYTE),
  DEFAULT_SERVICETIME_TYPE    VARCHAR2(8 BYTE),
  DEFAULT_ZONE_TYPE           VARCHAR2(16 BYTE)
);

ALTER TABLE SERVICETIME_SCENARIO ADD (CONSTRAINT PK_SERVICETIME_SCENARIO PRIMARY KEY (CODE));
 
ALTER TABLE SERVICETIME_SCENARIO ADD (CONSTRAINT ACT_SCENARIO_STTYPE_FK FOREIGN KEY (DEFAULT_SERVICETIME_TYPE) REFERENCES SERVICETIME_TYPE (CODE));
--------------- End SERVICETIME_SCENARIO Table ------------------------------------

--------------- Start DELIVERY_BUILDING Table -------------------------------------

CREATE TABLE DELIVERY_BUILDING
(
  ID                VARCHAR2(16 BYTE)           NOT NULL,
  SCRUBBED_STREET   VARCHAR2(255 BYTE)          NOT NULL,
  ZIP               VARCHAR2(10 BYTE)           NOT NULL,
  COUNTRY           VARCHAR2(2 BYTE)            NOT NULL,
  CITY              VARCHAR2(55 BYTE),
  STATE             VARCHAR2(2 BYTE),
  LONGITUDE         NUMBER(14,10),
  LATITUDE          NUMBER(14,10),
  SERVICETIME_TYPE  VARCHAR2(8 BYTE),
  GEO_CONFIDENCE    VARCHAR2(55 BYTE),
  GEO_QUALITY       VARCHAR2(55 BYTE)  
);

ALTER TABLE DELIVERY_BUILDING ADD (CONSTRAINT PK_DELIVERY_BUILDING PRIMARY KEY (ID));
       
ALTER TABLE DELIVERY_BUILDING ADD UNIQUE (SCRUBBED_STREET,ZIP,COUNTRY);

CREATE INDEX DELIVERY_BUILDING_SEARCH ON DELIVERY_BUILDING(SCRUBBED_STREET, ZIP);

CREATE SEQUENCE DELIVERY_BUILDING_SEQ
  START WITH 1
  MAXVALUE 1000000000000000000000000000
  MINVALUE 1
  NOCYCLE
  CACHE 200
  NOORDER;
--------------- End DELIVERY_BUILDING Table  ---------------------------- 

--------------- Start DELIVERY_LOCATION Table ----------------------------

CREATE TABLE DELIVERY_LOCATION
(
  ID                VARCHAR2(16 BYTE)           NOT NULL,
  BUILDINGID        VARCHAR2(16 BYTE)           NOT NULL,
  APARTMENT         VARCHAR2(55 BYTE),
  SERVICETIME_TYPE  VARCHAR2(8 BYTE)
);

ALTER TABLE DELIVERY_LOCATION ADD (CONSTRAINT PK_DELIVERY_LOCATION PRIMARY KEY(ID));
               
ALTER TABLE DELIVERY_LOCATION ADD (CONSTRAINT ACT_DELIVERY_LOCATIONBLD_FK FOREIGN KEY (BUILDINGID) REFERENCES DELIVERY_BUILDING (ID));

ALTER TABLE DELIVERY_LOCATION ADD (CONSTRAINT ACT_DELIVERY_LOCATIONST_FK FOREIGN KEY (SERVICETIME_TYPE) REFERENCES SERVICETIME_TYPE (CODE));

ALTER TABLE DELIVERY_LOCATION ADD UNIQUE (BUILDINGID, APARTMENT);

CREATE SEQUENCE DELIVERY_LOCATION_SEQ
  START WITH 1
  MAXVALUE 1000000000000000000000000000
  MINVALUE 1
  NOCYCLE
  CACHE 200
  NOORDER;
--------------- End DELIVERY_LOCATION Table --------------------------------

---------------- START ALL TABLE GRANTS --------------------------------------------
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_TYPE TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_TYPE TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_TYPE TO FDTRN_PRDA;
GRANT SELECT ON SERVICETIME_TYPE TO APPDEV;

GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME TO FDTRN_PRDA;
GRANT SELECT ON SERVICETIME TO APPDEV;

GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_SCENARIO TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_SCENARIO TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON  SERVICETIME_SCENARIO TO FDTRN_PRDA;
GRANT SELECT ON SERVICETIME_SCENARIO TO APPDEV;

GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_BUILDING TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_BUILDING TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_BUILDING TO FDTRN_PRDA;
GRANT SELECT ON DELIVERY_BUILDING TO APPDEV;
GRANT SELECT ON DELIVERY_BUILDING_SEQ TO FDSTORE_PRDA;
GRANT SELECT ON DELIVERY_BUILDING_SEQ TO FDSTORE_PRDB;
GRANT SELECT ON DELIVERY_BUILDING_SEQ TO FDTRN_PRDA;

GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_LOCATION TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_LOCATION TO FDSTORE_PRDB;
GRANT DELETE, INSERT, SELECT, UPDATE ON  DELIVERY_LOCATION TO FDTRN_PRDA;
GRANT SELECT ON DELIVERY_LOCATION TO APPDEV;
GRANT SELECT ON DELIVERY_LOCATION_SEQ TO FDSTORE_PRDA;
GRANT SELECT ON DELIVERY_LOCATION_SEQ TO FDSTORE_PRDB;
GRANT SELECT ON DELIVERY_LOCATION_SEQ TO FDSTORE_PRDB;

---------------- END ALL TABLE GRANTS --------------------------------------------

GRANT DELETE, INSERT, SELECT, UPDATE ON  TRANSP.TRN_ZONE TO FDSTORE_PRDA;
GRANT DELETE, INSERT, SELECT, UPDATE ON  TRANSP.TRN_ZONE TO FDSTORE_PRDB;

alter sequence DLV.DELIVERY_LOCATION_SEQ increment by 369002;
select DLV.DELIVERY_LOCATION_SEQ.nextval from dual;
alter sequence DLV.DELIVERY_LOCATION_SEQ increment by 1;