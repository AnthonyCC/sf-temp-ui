CREATE TABLE CUST.ALERTTYPE
(
NAME VARCHAR2(16) NOT NULL,
DESCRIPTION VARCHAR2(256) NOT NULL,
CONSTRAINT "PK_ALERTTYPE" PRIMARY KEY ("NAME")
);

GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.ALERTTYPE TO fdstore_prda;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.ALERTTYPE TO fdstore_prdb;
GRANT SELECT ON CUST.ALERTTYPE TO appdev;

CREATE TABLE CUST.CUSTOMERALERT
(
ID VARCHAR2(16) NOT NULL,
CUSTOMER_ID VARCHAR2(16) NOT NULL,
ALERT_TYPE VARCHAR2(16) NOT NULL,
NOTE VARCHAR2(256),
CREATE_DATE DATE NOT NULL,
CREATE_USER_ID VARCHAR2(16),
CONSTRAINT "PK_CUSTOMERALERT" PRIMARY KEY ("ID")
);

--
-- CA_CUST_ID_IDX  (Index) 
--
CREATE INDEX CA_CUST_ID_IDX ON CUST.CUSTOMERALERT(CUSTOMER_ID);

--
-- CA_CUST_AT_IDX  (Index) 
--
CREATE UNIQUE INDEX CUST_AT_IDX ON CUST.CUSTOMERALERT(CUSTOMER_ID, ALERT_TYPE);

--
-- CA_CUST_ID_FK (Foreign Key)
--
ALTER TABLE CUST.CUSTOMERALERT ADD (CONSTRAINT CA_CUST_ID_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES CUST.CUSTOMER (ID));

GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.CUSTOMERALERT TO fdstore_prda;
GRANT DELETE, INSERT, SELECT, UPDATE ON CUST.CUSTOMERALERT TO fdstore_prdb;
GRANT SELECT ON CUST.CUSTOMERALERT TO appdev;


INSERT INTO CUST.ALERTTYPE(NAME, DESCRIPTION) VALUES ('ECHECK', 'ECheck Alert'); 
INSERT INTO CUST.ALERTTYPE(NAME, DESCRIPTION) VALUES ('REFERRER', 'Referrer Alert'); 

COMMIT;
