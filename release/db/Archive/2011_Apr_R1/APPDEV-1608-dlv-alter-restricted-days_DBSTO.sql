ALTER TABLE DLV.MUNICIPALITY_INFO
add ID VARCHAR2(16);

UPDATE DLV.MUNICIPALITY_INFO SET ID = DLV.SYSTEM_SEQ.NEXTVAL;

ALTER TABLE DLV.MUNICIPALITY_INFO
ADD CONSTRAINT 
MUNICIPALITY_INFO_PK PRIMARY KEY(ID);

ALTER TABLE DLV.RESTRICTED_DAYS
add (HOLIDAY_ID VARCHAR2(32),
DAYS_TO_ADD NUMBER(2));

CREATE TABLE DLV.RESTRICTION_DETAIL
(ID VARCHAR2(16),
 RESTRICTION_ID VARCHAR2(16),
 DAY_OF_WEEK NUMBER(1),
 RES_START_TIME VARCHAR2(15),
 RES_END_TIME VARCHAR2(15),
 CONSTRAINT RESTRICTION_DTL_PK PRIMARY KEY(ID),
 CONSTRAINT RESTRICTED_DAYS_FK FOREIGN KEY(RESTRICTION_ID)
 REFERENCES DLV.RESTRICTED_DAYS(ID));

GRANT SELECT, INSERT, DELETE, UPDATE on DLV.RESTRICTION_DETAIL to FDSTORE_STPRD01;

GRANT SELECT, INSERT, DELETE, UPDATE on DLV.RESTRICTION_DETAIL to APPDEV;

CREATE TABLE DLV.MUNICIPALITY_RESTRICTION_DATA
(ID VARCHAR2(16),
 MUNICIPALITY_ID VARCHAR2(16),
 RESTRICTION_ID VARCHAR2(16),
 CONSTRAINT REGION_RES_DATA_PK PRIMARY KEY(ID),
 CONSTRAINT REGION_RES_DATA_RES_DATA_FK FOREIGN KEY(RESTRICTION_ID)
 REFERENCES DLV.RESTRICTED_DAYS(ID),
 CONSTRAINT REGION_RES_DATA_MUN_INFO_FK FOREIGN KEY(MUNICIPALITY_ID)
 REFERENCES DLV.MUNICIPALITY_INFO(ID));

GRANT SELECT, INSERT, DELETE, UPDATE on DLV.MUNICIPALITY_RESTRICTION_DATA to FDSTORE_STPRD01;

GRANT SELECT on DLV.MUNICIPALITY_RESTRICTION_DATA to APPDEV;

