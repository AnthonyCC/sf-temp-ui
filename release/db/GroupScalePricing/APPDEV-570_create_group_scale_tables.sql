
CREATE TABLE ERPS.GRP_SCALE_MASTER 
 (
 ID VARCHAR2(16) PRIMARY KEY,
  VERSION NUMBER(10),
SAP_ID  VARCHAR2(10) not null,
 SHORT_DESC VARCHAR2(55) not null,
 LONG_DESC VARCHAR2(255) not null,
 ACTIVE VARCHAR2(1)
 );
 
 CREATE TABLE ERPS.GRP_PRICING (
 ID VARCHAR2(16) PRIMARY KEY,
 VERSION NUMBER(10),
 GRP_ID VARCHAR2(16) not null,
 ZONE_ID VARCHAR2(10) not null,
 QUANTITY NUMBER(10,2) not null,
 PRICING_UNIT VARCHAR2(3) not null,
 PRICE NUMBER(10,2) not null
 );
 
 ALTER TABLE ERPS.GRP_PRICING ADD (
  SCALE_UNIT VARCHAR2(3) NOT NULL
 );
 

 CREATE TABLE ERPS.MATERIAL_GRP 
 (
 ID VARCHAR2(16) PRIMARY KEY,
  VERSION NUMBER(10),
 MAT_ID  VARCHAR2(18) not null,
 GRP_ID VARCHAR2(16) not null
 );
 
 
 ALTER TABLE ERPS.MATERIAL_GRP ADD (
  CONSTRAINT MAT_GRP_MAT_FK 
 FOREIGN KEY (MAT_ID) 
 REFERENCES ERPS.MATERIAL (ID));
 
 ALTER TABLE ERPS.MATERIAL_GRP ADD (
  CONSTRAINT MAT_GRP_GRP_FK 
 FOREIGN KEY (GRP_ID) 
 REFERENCES ERPS.GRP_SCALE_MASTER (ID));
 
 GRANT ALL ON ERPS.GRP_SCALE_MASTER TO FDSTORE_PRDA
 
 GRANT ALL ON  ERPS.GRP_PRICING TO FDSTORE_PRDA
 
GRANT ALL ON  ERPS.MATERIAL_GRP TO FDSTORE_PRDA


--ALTERTABLE TABLE ERPS.MATERIAL_GRP  ADD VERSION NUMBER(10) NOT NULL



CREATE SEQUENCE ERPS.GRPBATCH_SEQ
  START WITH 10000
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  NOORDER;


GRANT ALTER, SELECT ON ERPS.GRPBATCH_SEQ TO FDSTORE_PRDA; 




DROP TABLE ERPS.GRP_HISTORY CASCADE CONSTRAINTS;

CREATE TABLE ERPS.GRP_HISTORY
(
  VERSION          NUMBER(10)          PRIMARY KEY,
  DATE_CREATED     DATE                         NOT NULL,
  CREATED_BY       VARCHAR2(40)            NOT NULL,
  APPROVAL_STATUS  CHAR(1)                 NOT NULL,
  DATE_APPROVED    DATE,
  APPROVED_BY      VARCHAR2(40),
  DESCRIPTION      VARCHAR2(255)
)


GRANT ALL ON ERPS.GRP_HISTORY TO FDSTORE_PRDA;
