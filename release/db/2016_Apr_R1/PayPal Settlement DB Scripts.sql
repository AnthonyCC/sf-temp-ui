ALTER TABLE CUST.SETTLEMENT ADD
(
  SETTLEMENT_SOURCE      CHAR(2),
  AFFILIATE_ACCOUNT_ID   VARCHAR2(127),
  TOTAL_GROSS_CREDIT     NUMBER(26),
  TOTAL_GROSS_DEBIT      NUMBER(26),
  TOTAL_TRANS_FEE_CREDIT NUMBER(26),
  TOTAL_TRANS_FEE_DEBIT  NUMBER(26),
  CREATED_TIME_DATE      TIMESTAMP WITH TIME ZONE,
  PROCESSED_TIME_DATE    TIMESTAMP WITH TIME ZONE
);

CREATE TABLE CUST.SETTLEMENT_TRANSACTION
(
  ID                     VARCHAR2(16),
  TRXN_ID                VARCHAR2(100),
  ORDER_ID               VARCHAR2(16),
  PP_REF_ID              VARCHAR2(24),
  PP_REF_TYPE            CHAR(3),
  TX_EVENT_CODE          CHAR(5),
  TX_INITIATION_DATE     TIMESTAMP WITH TIME ZONE,
  TX_COMPLETION_DATE     TIMESTAMP WITH TIME ZONE,
  TX_DEBIT_CREDIT        CHAR(2), -- DR / CR
  TX_GROSS_AMOUNT        NUMBER(26),
  TX_GROSS_CURRENCY      CHAR(3), -- USD
  FEE_DEBIT_CREDIT       CHAR(2), -- DR / CR
  FEE_AMOUNT             NUMBER(26),
  FEE_CURRENCY           CHAR(3), -- USD
  CONSUMER_ID            VARCHAR2(127),
  PAYMENT_TRACKING_ID    VARCHAR2(127),
  BANK_REF_ID            VARCHAR2(13),
  STATUS                 VARCHAR2(10), -- Processed (C), Processing (P)
  SETTLEMENT_ID          VARCHAR2(16),
  CREATED_TIME_DATE      TIMESTAMP WITH TIME ZONE,
  PROCESSED_TIME_DATE    TIMESTAMP WITH TIME ZONE,
  GATEWAY_ORDER_ID       VARCHAR2(16),
  CUSTOM_FIELD           VARCHAR2(256),
  STORE_ID               VARCHAR2(50),
  CREDIT_TX_FEE          VARCHAR2(26),
  CREDIT_PROMOTIONAL_FEE VARCHAR2(26),
  CREDIT_TERM            VARCHAR2(26),
    CONSTRAINT PK_PP_SETTLEMENT_TRANSACTION PRIMARY KEY (ID)
);

CREATE INDEX CUST.SETTLEMENT_TRANSACTION_IDX
     ON CUST.SETTLEMENT_TRANSACTION (TRXN_ID);
                                
CREATE INDEX CUST.SETTLEMENT_TRANSACTION_ORD_IDX
     ON CUST.SETTLEMENT_TRANSACTION (GATEWAY_ORDER_ID);
