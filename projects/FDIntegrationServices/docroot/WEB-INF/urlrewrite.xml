<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 2.6//EN"
        "http://tuckey.org/res/dtds/urlrewrite2.6.dtd">

	<!--

		Configuration file for UrlRewriteFilter http://tuckey.org/urlrewrite/
	-->
<urlrewrite>

	<!--
		disabled because it's conflicting with "/search/query/(.*)" <rule>
		<from>/search/query/(.*)/page/(.*)/max/(.*)</from> <to
		last="true">/search.do?searchTerm=$1&amp;page=$2&amp;max=$3</to>
		</rule>
	-->

	<!-- Search Autocomplete -->
	<rule>
		<from>^/v/([0-9]+)/search/autocomplete/(.*)</from>
		<to last="true">/search.do?action=autocomplete&amp;searchTerm=$2&amp;ver=$1</to>
	</rule>

	<!-- Search -->
	<rule>
		<from>^/v/([0-9]+)/search/query/(.*)</from>
		<to last="true">/search.do?searchTerm=$2&amp;ver=$1</to>
	</rule>

	<!-- UPC Search -->
	<rule>
		<from>^/v/([0-9]+)/search/upc/(.*)</from>
		<to last="true">/search.do?upc=$2&amp;ver=$1</to>
	</rule>

	<!-- Search with payload -->
	<rule>
		<from>^/v/([0-9]+)/search/$</from>
		<to last="true">/search.do?ver=$1</to>
	</rule>

	<!-- View Product -->
	<rule>
		<from>^/v/([0-9]+)/product/catid/(.*)/id/(.*)</from>
		<to last="true">/product.do?productId=$3&amp;categoryId=$2&amp;ver=$1</to>
	</rule>

	<!-- View More Info -->
	<rule>
		<from>^/v/([0-9]+)/product/moreinfo/catid/(.*)/id/(.*)</from>
		<to last="true">/product.do?productId=$3&amp;categoryId=$2&amp;action=moreInfo&amp;ver=$1</to>
	</rule>

	<rule>
		<from>^/v/([0-9]+)/product/getprice/catid/(.*)/id/(.*)</from>
		<to last="true">/product.do?productId=$3&amp;categoryId=$2&amp;action=getprice&amp;ver=$1</to>
	</rule>

	<!-- Login -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/login/$</from>
		<to last="true">/login.do?action=login&amp;ver=$1</to>
	</rule>

	<!-- Cart : Apply Promo -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/promo/apply/(.*)$</from>
		<to last="true">/cart.do?action=applypromo&amp;promoId=$3&amp;ver=$1</to>
	</rule>

	<!-- Cart : Remove Promo -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/promo/remove/(.*)</from>
		<to last="true">/cart.do?action=removepromo&amp;promoId=$3&amp;ver=$1</to>
	</rule>

	<!-- Cart : Add Item -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/add/</from>
		<to last="true">/cart.do?action=additem&amp;ver=$1</to>
	</rule>

	<!-- Cart : Add Multiple Items -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/addmultiple/</from>
		<to last="true">/cart.do?action=addmultipleitems&amp;ver=$1</to>
	</rule>

	<!-- Cart : Update Item -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/update/</from>
		<to last="true">/cart.do?action=updateitem&amp;ver=$1</to>
	</rule>

	<!-- Cart : Remove an Item -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/remove/(.*)$</from>
		<to last="true">/cart.do?action=removeitem&amp;cartLineId=$3&amp;ver=$1</to>
	</rule>
	<!-- Cart : Remove all items -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/removeallitems/</from>
		<to last="true">/cart.do?action=removeallitems&amp;ver=$1</to>
	</rule>

	<!-- Cart : Get Items -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/getdetail/</from>
		<to last="true">/cart.do?action=getcartdetail&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Init Checkout -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/init/$</from>
		<to last="true">/checkout.do?action=initcheckout&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Init Checkout -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/authenticate/$</from>
		<to>/checkout.do?action=authenticate&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Get Delivery Addresses -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/deliveryaddresses/getall/</from>
		<to last="true">/checkout.do?action=getdeliveryaddresses&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/deliveryaddresses/getall/$</from>
		<to last="true">/checkout.do?action=getdeliveryaddresses&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Set Delivery Address -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/deliveryaddresses/set/</from>
		<to last="true">/checkout.do?action=setdeliveryaddress&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/deliveryaddresses/set/$</from>
		<to last="true">/checkout.do?action=setdeliveryaddress&amp;ver=$1</to>
	</rule>


	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Set Delivery Slot -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/deliverytimeslot/reserve/(.*)/$</from>
		<to last="true">/checkout.do?action=reservetimeslot&amp;slotId=$3&amp;ver=$1</to>
	</rule>

	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/deliverytimeslot/reserve/(.*)$</from>
		<to last="true">/checkout.do?action=reservetimeslot&amp;slotId=$3&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Get Payment Methods -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated-->
	<rule>
		<from>^/v/([0-9]+)/(.*)/paymentmethods/getall/</from>
		<to last="true">/checkout.do?action=getpaymentmethods&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/paymentmethod/getall/</from>
		<to last="true">/checkout.do?action=getpaymentmethods&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Set Payment Methods -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/paymentmethod/set/</from>
		<to last="true">/checkout.do?action=setpaymentmethod&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/paymentmethod/set/</from>
		<to last="true">/checkout.do?action=setpaymentmethod&amp;ver=$1</to>
	</rule>

	<!-- Submit Order -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/ordersubmit/</from>
		<to last="true">/checkout.do?action=submitorder&amp;ver=$1</to>
	</rule>

	<!-- Order Detail -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/orderdetail/</from>
		<to last="true">/checkout.do?action=revieworderdetail&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- ATP Error Detail -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/atp/error/</from>
		<to last="true">/checkout.do?action=getatperrordetail&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/atp/error/</from>
		<to last="true">/checkout.do?action=getatperrordetail&amp;ver=$1</to>
	</rule>

	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- ATP Remove Items -->
	<!-- xxxxxxxxxxxxxxxxxxx -->
	<!-- Deprecated -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/atp/removeitems/</from>
		<to last="true">/checkout.do?action=removeunavailableitems&amp;ver=$1</to>
	</rule>
	<!-- New -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/checkout/atp/removeitems/</from>
		<to last="true">/checkout.do?action=removeunavailableitems&amp;ver=$1</to>
	</rule>

	<!-- Verify Age for Alcohol Purchase -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/alcohol/verifyage/</from>
		<to last="true">/checkout.do?action=alcoholageverify&amp;ver=$1</to>
	</rule>

	<!-- Remove all alcohol items from cart -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/alcohol/removefromcart/</from>
		<to last="true">/cart.do?action=removealcoholfromcart&amp;ver=$1</to>
	</rule>

	<!-- Product Health Warning Acknowledge -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/alcohol/acknowledgehealthwarning/$</from>
		<to>/product.do?action=acknowledgehealthwarning&amp;ver=$1</to>
	</rule>

	<!-- Get previous order detail -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/order/(.*)/detail$</from>
		<to last="true">/order.do?action=getorderdetail&amp;orderId=$3&amp;ver=$1</to>
	</rule>

	<!-- Cancel pending order -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/order/(.*)/cancel$</from>
		<to last="true">/order.do?action=cancelorder&amp;orderId=$3&amp;ver=$1</to>
	</rule>

	<!-- Order history for Quick Shop -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/orders/quickshop/</from>
		<to last="true">/order.do?action=getquickshoporders&amp;ver=$1</to>
	</rule>

	<!-- Modify Order -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/order/(.*)/modify$</from>
		<to last="true">/order.do?action=modifyorder&amp;orderId=$3&amp;ver=$1</to>
	</rule>

	<!-- Cancel Order Modify -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/order/cancelmodify/</from>
		<to last="true">/order.do?action=cancelmodify&amp;ver=$1</to>
	</rule>

	<!-- Logout -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/logout/</from>
		<to last="true">/login.do?action=logout&amp;ver=$1</to>
	</rule>
	
	<!-- ForgotPassword -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/forgotpassword/$</from>
		<to last="true">/login.do?action=forgotpassword&amp;ver=$1</to>
	</rule>
		
	<!-- Ping -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/ping/</from>
		<to last="true">/login.do?action=ping&amp;ver=$1</to>
	</rule>

	<!-- Refresh -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/login/refresh/</from>
		<to last="true">/login.do?action=ping&amp;ver=$1</to>
	</rule>

	<!-- QuickShop from Previous Order -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/order/id/(.*)/quickshop/</from>
		<to last="true">/order.do?orderId=$3&amp;action=quickshop&amp;ver=$1</to>
	</rule>
	
	<!-- QuickShop from Previous Order By Dept -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/quickshop/dept/id/(.*)/filterdays/(.*)/sortby/(.*)/geteveryitemfordept/</from>
		<to last="true">/order.do?orderId=every&amp;qsDeptId=$3&amp;qsNoOfFilterDays=$4&amp;qsSortBy=$5&amp;action=geteveryitemfordept&amp;ver=$1</to>
	</rule>
	
	<rule>
		<from>^/v/([0-9]+)/(.*)/quickshop/filterdays/(.*)/getdeptsforeveryitem/</from>
		<to last="true">/order.do?orderId=every&amp;qsNoOfFilterDays=$3&amp;action=getdeptsforeveryitem&amp;ver=$1</to>
	</rule>

	<!-- List Shopping lists -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/shoppinglists/</from>
		<to last="true">/shoppinglist.do?action=getshoppinglists&amp;ver=$1</to>
	</rule>

	<!-- List Shopping lists -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/shoppinglist/id/(.*)/quickshop/</from>
		<to last="true">/shoppinglist.do?cclId=$3&amp;action=quickshop&amp;ver=$1</to>
	</rule>

	<rule>
		<from>^/v/([0-9]+)/(.*)/cart/removemultipleitems/</from>
		<to last="true">/cart.do?action=removemultipleitems&amp;ver=$1</to>
	</rule>

	<!-- Smart Store -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/youmightalsolike/</from>
		<to last="true">/smartstore.do?action=getymal&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/favorite/$</from>
		<to last="true">/smartstore.do?action=favorite&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/yourfavorite/more/$</from>
		<to last="true">/smartstore.do?action=getyourfavorite&amp;page=next&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/yourfavorite/$</from>
		<to last="true">/smartstore.do?action=getyourfavorite&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/fdfavorite/$</from>
		<to last="true">/smartstore.do?action=getfdfavorite&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/(.*)/smartstore/fdfavorite/more/$</from>
		<to last="true">/smartstore.do?action=getfdfavorite&amp;page=next&amp;ver=$1</to>
	</rule>

	<!-- Contact Us : Get -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/contactus/get/</from>
		<to last="true">/contactus.do?action=getformdata&amp;ver=$1</to>
	</rule>
	<!-- Contact Us : Post -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/contactus/send/</from>
		<to last="true">/contactus.do?action=submit&amp;ver=$1</to>
	</rule>

	<!-- What's Good - Categories-->
	<rule>
		<from>^/v/([0-9]+)/product/whatsgood/categories/$</from>
		<to last="true">/product.do?action=getwhatsgoodcategories&amp;ver=$1</to>
	</rule>

	<!-- What's Good - By Category ID -->
	<rule>
		<from>^/v/([0-9]+)/product/whatsgood/category/(.*)/$</from>
		<to last="true">/product.do?action=getwhatsgoodcateory&amp;ver=$1&amp;categoryId=$2</to>
	</rule>

	<!-- What's Good - Butcher's Block-->
	<!--	<rule>-->
	<!--		<from>^/v/([0-9]+)/product/butchersblock/</from>-->
	<!--		<to last="true">/product.do?action=wsgbutchers&amp;ver=$1</to>-->
	<!--	</rule>-->

	<!-- What's Good - Brand-Name Deals-->
	<!--	<rule>-->
	<!--		<from>^/v/([0-9]+)/product/brandnamedeals/</from>-->
	<!--		<to last="true">/product.do?action=wsgdeals&amp;ver=$1</to>-->
	<!--	</rule>-->

	<!-- What's Good - Brand-Name Deals-->
	<!--	<rule>-->
	<!--		<from>^/v/([0-9]+)/product/peakproduce/</from>-->
	<!--		<to last="true">/product.do?action=wsgproduce&amp;ver=$1</to>-->
	<!--	</rule>-->

	<!-- Delivery Info : Get Delivery Addresses -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/addresses/$</from>
		<to last="true">/account.do?action=getaddresses&amp;ver=$1</to>
	</rule>
	<!-- Delivery Info : Get Timeslots -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/timeslots$</from>
		<to last="true">/account.do?action=gettimeslots&amp;ver=$1</to>
	</rule>
	<!-- Delivery Info : Cancel Reservation -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/timeslots/cancel$</from>
		<to last="true">/account.do?action=cancelreservation&amp;ver=$1</to>
	</rule>
	<!-- Delivery Info : Reserve Timeslot -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/timeslots/reserve$</from>
		<to last="true">/account.do?action=reservetimeslot&amp;ver=$1</to>
	</rule>
	<!-- Delivery Info : Get Timeslots -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/timeslots/(.*)$</from>
		<to last="true">/account.do?action=gettimeslots&amp;addressId=$3&amp;ver=$1</to>
	</rule>

	<!-- Order history for all order -->
	<rule>
		<from>^/v/([0-9]+)/(.*)/account/orders/</from>
		<to last="true">/account.do?action=getorders&amp;ver=$1</to>
	</rule>

	<!-- Email capture -->
	<rule>
		<from>^/v/([0-9]+)/emailcapture/(.*)</from>
		<to last="true">/emailcapture.do?email=$2&amp;ver=$1</to>
	</rule>

	<!-- config -->
	<rule>
		<from>^/v/([0-9]+)/configvalue/(.*)</from>
		<to last="true">/configvalue.do?key=$2&amp;ver=$1</to>
	</rule>

	<!-- Help -->
	<rule>
		<from>^/v/([0-9]+)/help/(.*)</from>
		<to last="true">/help.do?action=$2&amp;ver=$1</to>
	</rule>
	
	<!-- Browse -->
	<rule>
		<from>^/v/([0-9]+)/browse/departments/(.*)</from>
		<to last="true">/browse.do?action=getDepartments&amp;browseTerm=$2&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/browse/categories/(.*)</from>
		<to last="true">/browse.do?action=getCategories&amp;browseTerm=$2&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/browse/categorycontent/(.*)</from>
		<to last="true">/browse.do?action=getCategoryContent&amp;browseTerm=$2&amp;ver=$1</to>
	</rule>
	<rule>
		<from>^/v/([0-9]+)/browse/groupproducts/(.*)</from>
		<to last="true">/browse.do?action=getGroupProducts&amp;ver=$1</to>
	</rule>
	
	<!-- Test -->
	<rule>
		<from>^/v/([0-9]+)/test/$</from>
		<to last="true">/test.do</to>
	</rule>

	<rule>
		<from>^/test/$</from>
		<to last="true">/test.do</to>
	</rule>

	<!--	 Discovery Service -->
	<!--	<rule>-->
	<!--		<from>^/discovery(.*)$</from>-->
	<!--
		<to last="true"
		type="permanent-redirect">%{context-path}/discovery$1</to>
	-->
	<!--	</rule>-->

	<!-- Versioning Default -->
	<!--	<rule>-->
	<!--		<from>^/([^v])(.*)$</from>-->
	<!--		<to>/v/1/$1$2</to>-->
	<!--	</rule>-->
</urlrewrite>

