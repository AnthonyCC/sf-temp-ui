<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->


<page-specification class="com.freshdirect.dlvadmin.ShowCurrentTimeslots">
	
	<property-specification name="selectedRegion" type="com.freshdirect.delivery.model.DlvRegionModel" persistent="yes"/>
	
	<property-specification name="selectedZone" type="java.lang.String" persistent="yes"/>


    <component id="border" type="Border"/>

    <component id="forEachDay" type="Foreach">
        <binding name="source" expression='engine.getDailyTimeslots(selectedZone).entrySet()'/>
    </component>

    <component id="forEachTimeslot" type="Foreach">
        <binding name="source" expression='components.forEachDay.value.value'/>
        <binding name="value" expression='currentTimeslot'/>
    </component>

    <component id="ifRegionSelected" type="Conditional">
        <binding name="condition" expression='selectedRegion!=null'/>
    </component>

    <component id="insertDay" type="Insert">
        <binding name="format" expression='dateFormatter'/>
        <binding name="raw" expression='true'/>
        <binding name="value" expression='components.forEachDay.value.key'/>
    </component>

    <component id="regionForm" type="Form">
        <binding name="stateful" expression='false'/>
    </component>

    <component id="selectRegion" type="PropertySelection">
        <binding name="model" expression='engine.regionSelectionModel'/>
        <static-binding name="submitOnChange">true</static-binding>
        <binding name="value" expression='selectedRegion'/>
    </component>

    <component id="selectZone" type="PropertySelection">
        <binding name="model" expression='engine.getZoneSelectionModel( selectedRegion )'/>
        <static-binding name="submitOnChange">true</static-binding>
        <binding name="value" expression='selectedZone'/>
    </component>

    <component id="zoneForm" type="Form">
        <binding name="stateful" expression='false'/>
    </component>
    
    <component id="insertPercentage" type="Insert">
        <binding name="format" expression='getPercentageFormatter()'/>
        <binding name="value" expression='getPercentage()'/>
    </component>
</page-specification>
