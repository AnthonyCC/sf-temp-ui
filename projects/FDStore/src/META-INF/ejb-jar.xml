<?xml version="1.0"?>
<!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN' 'http://java.sun.com/dtd/ejb-jar_2_0.dtd'>

<ejb-jar>

	<enterprise-beans>
	
	    <session>
			<ejb-name>FDMonitor</ejb-name>
			<home>com.freshdirect.fdstore.monitor.ejb.FDMonitorHome</home>
			<remote>com.freshdirect.fdstore.monitor.ejb.FDMonitorSB</remote>
			<ejb-class>com.freshdirect.fdstore.monitor.ejb.FDMonitorSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/ErpMonitor</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.monitor.ejb.ErpMonitorHome</home>
				<remote>com.freshdirect.monitor.ejb.ErpMonitorSB</remote>
			</ejb-ref>
		</session>

		<session>
			<ejb-name>InventoryWarmup</ejb-name>
			<home>com.freshdirect.fdstore.warmup.ejb.InventoryWarmupHome</home>
			<remote>com.freshdirect.fdstore.warmup.ejb.InventoryWarmupSB</remote>
			<ejb-class>com.freshdirect.fdstore.warmup.ejb.InventoryWarmupSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Bean</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/FDCustomerManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerHome</home>
				<remote>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerSB</remote>
			</ejb-ref>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>FDCustomerManager</ejb-name>
			<home>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerHome</home>
			<remote>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerSB</remote>
			<ejb-class>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/ErpCustomer</ejb-ref-name>
				<ejb-ref-type>Entity</ejb-ref-type>
				<home>com.freshdirect.customer.ejb.ErpCustomerHome</home>
				<remote>com.freshdirect.customer.ejb.ErpCustomerEB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/FDCustomer</ejb-ref-name>
				<ejb-ref-type>Entity</ejb-ref-type>
				<home>com.freshdirect.fdstore.customer.ejb.FDCustomerHome</home>
				<remote>com.freshdirect.fdstore.customer.ejb.FDCustomerEB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/PaymentManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.payment.ejb.PaymentManagerHome</home>
				<remote>com.freshdirect.payment.ejb.PaymentManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/FraudManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.customer.ejb.ErpFraudPreventionHome</home>
				<remote>com.freshdirect.customer.ejb.ErpFraudPreventionSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/DlvManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.delivery.ejb.DlvManagerHome</home>
				<remote>com.freshdirect.delivery.ejb.DlvManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/CrmManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.crm.ejb.CrmManagerHome</home>
				<remote>com.freshdirect.crm.ejb.CrmManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/AdServerGateway</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.fdstore.oas.ejb.AdServerGatewayHome</home>
				<remote>com.freshdirect.fdstore.oas.ejb.AdServerGatewaySB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/DlvPassManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.deliverypass.ejb.DlvPassManagerHome</home>
				<remote> com.freshdirect.deliverypass.ejb.DlvPassManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/GiftCardManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.giftcard.ejb.GiftCardManagerHome</home>
				<remote> com.freshdirect.giftcard.ejb.GiftCardManagerSB</remote>
			</ejb-ref>							
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>FDListManager</ejb-name>
			<home>com.freshdirect.fdstore.lists.ejb.FDListManagerHome</home>
			<remote>com.freshdirect.fdstore.lists.ejb.FDListManagerSB</remote>
			<ejb-class>com.freshdirect.fdstore.lists.ejb.FDListManagerSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>CallCenterManager</ejb-name>
			<home>com.freshdirect.fdstore.customer.ejb.CallCenterManagerHome</home>
			<remote>com.freshdirect.fdstore.customer.ejb.CallCenterManagerSB</remote>
			<ejb-class>com.freshdirect.fdstore.customer.ejb.CallCenterManagerSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/ComplaintManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.customer.ejb.ErpComplaintManagerHome</home>
				<remote>com.freshdirect.customer.ejb.ErpComplaintManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/DlvPassManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.deliverypass.ejb.DlvPassManagerHome</home>
				<remote> com.freshdirect.deliverypass.ejb.DlvPassManagerSB</remote>
			</ejb-ref>					
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>
                
		<session>
			<ejb-name>AdServerGateway</ejb-name>
			<home>com.freshdirect.fdstore.oas.ejb.AdServerGatewayHome</home>
			<remote>com.freshdirect.fdstore.oas.ejb.AdServerGatewaySB</remote>
			<ejb-class>com.freshdirect.fdstore.oas.ejb.AdServerGatewaySessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
					<res-ref-name>jms/QueueFactory</res-ref-name>
					<res-type>javax.jms.QueueConnectionFactory</res-type>
					<res-auth>Container</res-auth>
			</resource-ref>
			<resource-env-ref>
					<resource-env-ref-name>jms/Queue</resource-env-ref-name>
					<resource-env-ref-type>javax.jms.Queue</resource-env-ref-type>
			</resource-env-ref>
		</session>

		<session>
			<ejb-name>FDPromotionManager</ejb-name>
			<home>com.freshdirect.fdstore.promotion.management.ejb.FDPromotionManagerHome</home>
			<remote>com.freshdirect.fdstore.promotion.management.ejb.FDPromotionManagerSB</remote>
			<ejb-class>com.freshdirect.fdstore.promotion.management.ejb.FDPromotionManagerSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/ActivityLog</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.customer.ejb.ActivityLogHome</home>
				<remote>com.freshdirect.customer.ejb.ActivityLogSB</remote>
			</ejb-ref>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>


		<session>
			<ejb-name>FDReferralManager</ejb-name>
			<home>com.freshdirect.fdstore.referral.ejb.FDReferralManagerHome</home>
			<remote>com.freshdirect.fdstore.referral.ejb.FDReferralManagerSB</remote>
			<ejb-class>com.freshdirect.fdstore.referral.ejb.FDReferralManagerSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>VariantSelection</ejb-name>
			<home>com.freshdirect.smartstore.ejb.VariantSelectionHome</home>
			<remote>com.freshdirect.smartstore.ejb.VariantSelectionSB</remote>
			<ejb-class>com.freshdirect.smartstore.ejb.VariantSelectionSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>SmartStoreServiceConfiguration</ejb-name>
			<home>com.freshdirect.smartstore.ejb.SmartStoreServiceConfigurationHome</home>
			<remote>com.freshdirect.smartstore.ejb.SmartStoreServiceConfigurationSB</remote>
			<ejb-class>com.freshdirect.smartstore.ejb.SmartStoreServiceConfigurationSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>DyfModelHome</ejb-name>
			<home>com.freshdirect.smartstore.ejb.DyfModelHome</home>
			<remote>com.freshdirect.smartstore.ejb.DyfModelSB</remote>
			<ejb-class>com.freshdirect.smartstore.ejb.DyfModelSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>ScoreFactorHome</ejb-name>
			<home>com.freshdirect.smartstore.ejb.ScoreFactorHome</home>
			<remote>com.freshdirect.smartstore.ejb.ScoreFactorSB</remote>
			<ejb-class>com.freshdirect.smartstore.ejb.ScoreFactorSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>

		<session>
			<ejb-name>SessionImpressionLog</ejb-name>
			<home>com.freshdirect.smartstore.ejb.SessionImpressionLogHome</home>
			<remote>com.freshdirect.smartstore.ejb.SessionImpressionLogSB</remote>
			<ejb-class>com.freshdirect.smartstore.ejb.SessionImpressionLogSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>
        <session>
			<ejb-name>FDSurvey</ejb-name>
			<home>com.freshdirect.fdstore.survey.ejb.FDSurveyHome</home>
			<remote>com.freshdirect.fdstore.survey.ejb.FDSurveySB</remote>
			<ejb-class>com.freshdirect.fdstore.survey.ejb.FDSurveySessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Container</transaction-type>
            <resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</session>        
                
                <message-driven>
			<ejb-name>AdServerListener</ejb-name>
			<ejb-class>com.freshdirect.fdstore.oas.ejb.AdServerListener</ejb-class>
			<transaction-type>Container</transaction-type>
			<message-driven-destination>
				<destination-type>javax.jms.Queue</destination-type>
			</message-driven-destination>
		</message-driven>

		<entity>
			<ejb-name>FDCustomer</ejb-name>
			<home>com.freshdirect.fdstore.customer.ejb.FDCustomerHome</home>
			<remote>com.freshdirect.fdstore.customer.ejb.FDCustomerEB</remote>
			<ejb-class>com.freshdirect.fdstore.customer.ejb.FDCustomerEntityBean</ejb-class>
			<persistence-type>Bean</persistence-type>
			<prim-key-class>com.freshdirect.framework.core.PrimaryKey</prim-key-class>
			<reentrant>False</reentrant>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
		</entity>

	</enterprise-beans>

	<assembly-descriptor>

		<!--
		*****************************
		*** Manager Session Beans ***
		*****************************
		-->
		<container-transaction>
			<method>
				<ejb-name>FDCustomerManager</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>FDListManager</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>CallCenterManager</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>FDMonitor</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>
			<method>
				<ejb-name>AdServerGateway</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>
			<trans-attribute>Required</trans-attribute>
		</container-transaction>
                
		<container-transaction>
			<method>
				<ejb-name>FDPromotionManager</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>                        
			<trans-attribute>Supports</trans-attribute>
		</container-transaction>

		<container-transaction>
			<method>
				<ejb-name>FDReferralManager</ejb-name>
				<method-intf>Remote</method-intf>
				<method-name>*</method-name>
			</method>                        
			<trans-attribute>Required</trans-attribute>
		</container-transaction>

                		<!--
		****************************
		*** Message Driven Beans ***
		****************************
		-->
                <container-transaction>
                    <method>
                        <ejb-name>AdServerListener</ejb-name>
                        <method-name>*</method-name>
                    </method>
                    <trans-attribute>Required</trans-attribute>
                </container-transaction>

		<!--
		********************
		*** Entity Beans ***
		********************
		-->
		<container-transaction>
			<method>
				<ejb-name>FDCustomer</ejb-name>
				<method-name>*</method-name>
			</method>
			<trans-attribute>Supports</trans-attribute>
		</container-transaction>

	</assembly-descriptor>

</ejb-jar>
