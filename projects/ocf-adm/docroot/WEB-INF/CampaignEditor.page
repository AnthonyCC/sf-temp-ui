<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="com.freshdirect.ocf.ui.page.CampaignEditor">

    <description>Edit an existing campaign</description>
	
	<property-specification name="campaign" type="com.freshdirect.ocf.core.Campaign" persistent="yes" initial-value="new com.freshdirect.ocf.core.Campaign()"/>
	
	<property-specification name="flight" type="com.freshdirect.ocf.core.Flight"/>
	<property-specification name="action" type="com.freshdirect.ocf.core.ActionI"/>
	    
    <bean name="evenOdd" class="org.apache.tapestry.bean.EvenOdd"/>
	
	<property-specification name="dateFormat" type="java.text.DateFormat" initial-value='new java.text.SimpleDateFormat("MM/dd/yyyy hh:mm a")'/>
	
	<component id="name" type="ValidField">
		<static-binding name="displayName">Name</static-binding>
		<binding name="validator" expression="beans.requiredValidator"/>
		<binding name="value" expression="campaign.name"/>
	</component>

	<component id="description" type="TextArea">
		<static-binding name="displayName">Description</static-binding>
		<binding name="value" expression="campaign.description"/>
	</component>	

	<component id="lastName" type="ValidField">
		<static-binding name="displayName">Last Name</static-binding>
		<binding name="validator" expression="beans.requiredValidator"/>
		<binding name="value" expression="agent.name.last"/>
	</component>
	
	<component id="startDate" type="tacos:DatePicker">
		<static-binding name="text" value="-"/>
		<static-binding name="displayName" value="Start Date"/>
		<static-binding name="format" value="MM/dd/yyyy hh:mm a"/>
		<binding name="value" expression="campaign.startDate"/>
		<binding name="showsTime" expression="true"/>
		<binding name="time24" expression="false"/>
	</component>
	
	<component id="endDate" type="tacos:DatePicker">
		<static-binding name="text" value="-"/>
		<static-binding name="displayName" value="Start Date"/>
		<static-binding name="format" value="MM/dd/yyyy hh:mm a"/>
		<binding name="value" expression="campaign.endDate"/>
		<binding name="showsTime" expression="true"/>
		<binding name="time24" expression="false"/>
	</component>
	
	<component id="flightTable" type="contrib:Table">
		<binding name="source" expression="campaign.flights"/>
		<binding name="row" expression="flight"/>
		<binding name="rowsClass" expression="beans.evenOdd.next"/>
		<static-binding name="pageSize" value="20"/>
		<binding name="columns" expression="'Name:name, Schedule:scheduleName, !Actions, !edit, !execute'"/>
	</component>
	
	<component id="forEachAction" type="For">
		<binding name="source" expression="flight.actions"/>
		<binding name="value" expression="action"/>
	</component>

	<bean name="delegate" class="org.apache.tapestry.valid.ValidationDelegate"/>
	
	<bean name="requiredValidator" class="org.apache.tapestry.valid.StringValidator">
	    <set-property name="clientScriptingEnabled" expression="true"/>
	    <set-property name="required" expression="true"/>
	</bean>
	
	<bean name="dateValidator" class="org.apache.tapestry.valid.DateValidator">
        <set-property name="format" expression='new java.text.SimpleDateFormat("MM/dd/yyyy hh:mm a")'/>
		<set-property name="clientScriptingEnabled" expression="true"/>
	    <set-property name="required" expression="true"/>
	</bean>
    
    
    
</page-specification>
