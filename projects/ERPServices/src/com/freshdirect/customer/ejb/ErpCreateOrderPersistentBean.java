/* Generated by Together */

package com.freshdirect.customer.ejb;

import java.sql.*;
import java.util.List;

import com.freshdirect.customer.EnumTransactionType;
import com.freshdirect.customer.ErpAbstractOrderModel;
import com.freshdirect.customer.ErpCreateOrderModel;
import com.freshdirect.framework.core.PrimaryKey;


/**
 * ErpCreateOrder persistent bean.
 * @version    $Revision$
 * @author     $Author$
 * @stereotype fd-persistent
 */
public class ErpCreateOrderPersistentBean extends ErpAbstractOrderPersistentBean {

	/**
	 * Constructor for ErpCreateOrderPersistentBean.
	 */
	public ErpCreateOrderPersistentBean() {
		super();
	}
	
	public ErpCreateOrderPersistentBean(PrimaryKey pk){
		super(pk);
	}

	/**
	 * Constructor for ErpCreateOrderPersistentBean.
	 * @param pk
	 * @param conn
	 * @throws SQLException
	 */
	public ErpCreateOrderPersistentBean(PrimaryKey pk, Connection conn) throws SQLException {
		super(pk, conn);
	}

	/**
	 * Constructor for ErpCreateOrderPersistentBean.
	 * @param pk
	 * @param conn
	 * @param rs
	 * @throws SQLException
	 */
	public ErpCreateOrderPersistentBean(PrimaryKey pk, Connection conn, ResultSet rs) throws SQLException {
		super(pk, conn, rs);
	}

	/**
	 * Constructor for ErpCreateOrderPersistentBean.
	 * @param model
	 */
	public ErpCreateOrderPersistentBean(ErpCreateOrderModel model) {
		super(model);
	}

	/**
	 * Find ErpCreateOrderPersistentBean objects for a given parent.
	 * @param conn the database connection to operate on
	 * @param parentPK primary key of parent
	 * @return a List of ErpCreateOrderPersistentBean objects (empty if found none).
	 * @throws SQLException if any problems occur talking to the database
	 */
	public static List findByParent(Connection conn, PrimaryKey parentPK) throws SQLException {
		java.util.List lst = new java.util.LinkedList();
		PreparedStatement ps = conn.prepareStatement("SELECT ID FROM CUST.SALESACTION WHERE SALE_ID=? AND ACTION_TYPE = ?");
		ps.setString(1, parentPK.getId());
		ps.setString(2, EnumTransactionType.CREATE_ORDER.getCode());
		ResultSet rs = ps.executeQuery();
		while (rs.next()) {
			ErpCreateOrderPersistentBean bean = new ErpCreateOrderPersistentBean(new PrimaryKey(rs.getString(1)), conn);
			bean.setParentPK(parentPK);
			lst.add(bean);
		}
		rs.close();
		rs = null;
		ps.close();
		ps = null;
		return lst;
	}



	/**
	 * @see ErpAbstractOrderPersistentBean#createModel()
	 */
	protected ErpAbstractOrderModel createModel() {
		return new ErpCreateOrderModel();
	}

	/**
	 * @see ErpAbstractOrderPersistentBean#getTransactionType()
	 */
	protected EnumTransactionType getTransactionType() {
		return EnumTransactionType.CREATE_ORDER;
	}

}
