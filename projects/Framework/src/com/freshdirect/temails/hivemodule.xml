<?xml version="1.0"?>
<module id="com.freshdirect.temails" version="1.0.0">
	
	<configuration-point id="Configurations">
		<schema>
			<element name="templateConfig">
				<attribute name="subsystem" required="true"/>
				<attribute name="serviceName" required="true"/>			
				<element name="parser">
					<attribute required="true" name="class" translator="class" />
					<attribute required="true" name="label"/>
					<attribute required="true" name="xmlTag"/>
					<attribute required="true" name="order"/>
					<rules>
						<create-object class="com.freshdirect.temails.TemplateDescriptor"/>
						<read-attribute attribute="class" property="targetClass"/>
						<read-attribute attribute="label" property="label"/>
						<read-attribute attribute="xmlTag" property="xmlTag"/>					
						<read-attribute attribute="order" property="order"/>
						<invoke-parent method="addParserType"/>
					</rules>
				</element>
				<conversion class="com.freshdirect.temails.TEmailsConfig" />
			</element>
		</schema>
	</configuration-point>
	
	<service-point id="Publisher" interface="com.freshdirect.temails.EmailTemplatePublisherI"/>
	
	<implementation service-id="Publisher">
		<invoke-factory>
			<construct class="com.freshdirect.temails.EmailTemplatePublisher">
				<string>${com.freshdirect.temails.publish.dir}</string>
				<string>${com.freshdirect.temails.publish.script}</string>
			</construct>
		</invoke-factory>
	</implementation>
	
</module>
