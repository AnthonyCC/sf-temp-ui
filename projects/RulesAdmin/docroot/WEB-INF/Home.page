<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="com.freshdirect.rules.ui.Home">

    <description>add a description</description>
    
	<property-specification name="rule" type="com.freshdirect.rules.Rule"/>
	
	<property-specification name="selectedRule" type="com.freshdirect.rules.Rule" persistent="yes"/>
	
	<property-specification name="treeState" type="java.util.Set" persistent="yes" initial-value="new java.util.HashSet()"/>
	
	<property-specification name="condition" type="com.freshdirect.rules.ConditionI"/>
	
	<property-specification name="conditionType" type="java.lang.Class"/>
	
	<property-specification name="currConditionIndex" type="java.lang.Integer"/>
	
    <component id="nodeLink" type="DirectLink">
		<binding name="listener" expression="listeners.selectRule"/>
		<binding name="parameters" expression="rule.id"/>
		<binding name="disabled" expression="selectedRule!=null and selectedRule.id==rule.id"/>
	</component>
	
	<component id="nodeLabel" type="Insert">
		<binding name="value" expression="rule.name"/>
		<binding name="class" expression="selectedRule!=null and selectedRule.id==rule.id ? 'selected' : null"/>
	</component>
	
	<component id="nodeIcon" type="Any">
		<static-binding name="element" value="img"/>
		<binding name="src" expression="ruleIcon"/>
	</component>
	
    <component id="ruleTree" type="tacos:Tree">
		<binding name="contentProvider" expression="contentProvider"/>
		<binding name="keyProvider" expression="@com.freshdirect.rules.ui.RuleKeyProvider@INSTANCE"/>
		<binding name="value" expression="rule"/>
		<binding name="state" expression="treeState"/>
		<binding name="sorter" expression="@com.freshdirect.rules.ui.RulesComparator@INSTANCE"/>
		<binding name="nodeLinkAjax" expression="false" />
	</component>

	<bean name="delegate" class="org.apache.tapestry.valid.ValidationDelegate"/>
	<bean name="numberValidator" class="org.apache.tapestry.valid.NumberValidator">
		<set-property name="valueType">'double'</set-property>
		<set-property name="clientScriptingEnabled" expression="true"/>
    	<set-property name="required" expression="false"/>
	</bean>
	<bean name="stringValidator" class="org.apache.tapestry.valid.StringValidator" />
	
	<context-asset name="delCondition" path="img/del_condition.gif"/> 

</page-specification>
