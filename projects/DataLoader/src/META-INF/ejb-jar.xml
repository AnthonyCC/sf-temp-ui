<?xml version="1.0"?>

<!DOCTYPE ejb-jar PUBLIC '-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN' 'http://java.sun.com/dtd/ejb-jar_2_0.dtd'>

<ejb-jar>

    <enterprise-beans>
    
        <session>
            <ejb-name>VirtualProductLoader</ejb-name>
            <home>com.freshdirect.dataloader.sap.ejb.VirtualProductLoaderHome</home>
            <remote>com.freshdirect.dataloader.sap.ejb.VirtualProductLoaderSB</remote>
            <ejb-class>com.freshdirect.dataloader.sap.ejb.VirtualProductLoaderSessionBean</ejb-class>
            <session-type>Stateless</session-type>
            <transaction-type>Container</transaction-type>
            <ejb-ref>
                <ejb-ref-name>ejb/ErpProduct</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.ErpProductHome</home>
                <remote>com.freshdirect.erp.ejb.ErpProductEB</remote>
            </ejb-ref>
            <resource-ref>
                <res-ref-name>jdbc/dbpool</res-ref-name>
                <res-type>javax.sql.DataSource</res-type>
                <res-auth>Container</res-auth>
            </resource-ref>
        </session>
      
        <session>
            <ejb-name>SAPLoader</ejb-name>
            <home>com.freshdirect.dataloader.sap.ejb.SAPLoaderHome</home>
            <remote>com.freshdirect.dataloader.sap.ejb.SAPLoaderSB</remote>
            <ejb-class>com.freshdirect.dataloader.sap.ejb.SAPLoaderSessionBean</ejb-class>
            <session-type>Stateless</session-type>
            <transaction-type>Bean</transaction-type>
            <ejb-ref>
                <ejb-ref-name>ejb/ErpClass</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.ErpClassHome</home>
                <remote>com.freshdirect.erp.ejb.ErpClassEB</remote>
            </ejb-ref>
            <ejb-ref>
                <ejb-ref-name>ejb/ErpMaterial</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.ErpMaterialHome</home>
                <remote>com.freshdirect.erp.ejb.ErpMaterialEB</remote>
            </ejb-ref>
            <ejb-ref>
                <ejb-ref-name>ejb/ErpCharacteristicValuePrice</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.ErpCharacteristicValuePriceHome</home>
                <remote>com.freshdirect.erp.ejb.ErpCharacteristicValuePriceEB</remote>
            </ejb-ref>
            <ejb-ref>
                <ejb-ref-name>ejb/ErpProduct</ejb-ref-name>
                <ejb-ref-type>Entity</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.ErpProductHome</home>
                <remote>com.freshdirect.erp.ejb.ErpProductEB</remote>
            </ejb-ref>
            <ejb-ref>
                <ejb-ref-name>ejb/BatchManager</ejb-ref-name>
                <ejb-ref-type>Session</ejb-ref-type>
                <home>com.freshdirect.erp.ejb.BatchManagerHome</home>
                <remote>com.freshdirect.erp.ejb.BatchManagerSB</remote>
            </ejb-ref>
            <resource-ref>
                <res-ref-name>jdbc/dbpool</res-ref-name>
                <res-type>javax.sql.DataSource</res-type>
                <res-auth>Container</res-auth>
            </resource-ref>
        </session>
        
        

	<session>
		<ejb-name>InvoiceLoader</ejb-name>
		<home>com.freshdirect.dataloader.payment.ejb.InvoiceLoaderHome</home>
		<remote>com.freshdirect.dataloader.payment.ejb.InvoiceLoaderSB</remote>
		<ejb-class>com.freshdirect.dataloader.payment.ejb.InvoiceLoaderSessionBean</ejb-class>
		<session-type>Stateless</session-type>
		<transaction-type>Container</transaction-type>
		<resource-ref>
			<res-ref-name>jdbc/dbpool</res-ref-name>
			<res-type>javax.sql.DataSource</res-type>
			<res-auth>Container</res-auth>
		</resource-ref>
	</session>
	
	<session>
			<ejb-name>SaleCron</ejb-name>
			<home>com.freshdirect.dataloader.payment.ejb.SaleCronHome</home>
			<remote>com.freshdirect.dataloader.payment.ejb.SaleCronSB</remote>
			<ejb-class>com.freshdirect.dataloader.payment.ejb.SaleCronSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Bean</transaction-type>
			<ejb-ref>
				<ejb-ref-name>ejb/ErpCustomerManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.customer.ejb.ErpCustomerManagerHome</home>
				<remote>com.freshdirect.customer.ejb.ErpCustomerManagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/FDCustomerManager</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.fdstore.customer.ejb.FDCustomerManagerHome</home>
				<remote>com.freshdirect.fdstore.customer.ejb.FDCustomerManaagerSB</remote>
			</ejb-ref>
			<ejb-ref>
				<ejb-ref-name>ejb/Payment</ejb-ref-name>
				<ejb-ref-type>Session</ejb-ref-type>
				<home>com.freshdirect.payment.ejb.PaymentHome</home>
				<remote>com.freshdirect.payment.ejb.PaymentSB</remote>
			</ejb-ref>
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
	</session>
	
	
	
	<session>
			<ejb-name>GeoCodeLoader</ejb-name>
			<home>com.freshdirect.dataloader.geocodeloader.ejb.GeoCodeLoaderHome</home>
			<remote>com.freshdirect.dataloader.geocodeloader.ejb.GeoCodeLoaderSB</remote>
			<ejb-class>com.freshdirect.dataloader.geocodeloader.ejb.GeoCodeLoaderSessionBean</ejb-class>
			<session-type>Stateless</session-type>
			<transaction-type>Bean</transaction-type>			
			<resource-ref>
				<res-ref-name>jdbc/dbpool</res-ref-name>
				<res-type>javax.sql.DataSource</res-type>
				<res-auth>Container</res-auth>
			</resource-ref>
	</session>
		        
         <message-driven>
            <ejb-name>RoutingAddressLoadListener</ejb-name>
            <ejb-class>com.freshdirect.dataloader.routing.ejb.RoutingAddressLoadListener</ejb-class>
            <transaction-type>Container</transaction-type>
            <message-selector>(MessageType='ROUTINGADDRESS/process')</message-selector>
            <message-driven-destination>
                <destination-type>javax.jms.Queue</destination-type>
            </message-driven-destination>
        </message-driven>
        	
    </enterprise-beans>
    
    <assembly-descriptor>
        
        <container-transaction>
        	<method>
        		<ejb-name>VirtualProductLoader</ejb-name>
        		<method-intf>Remote</method-intf>
        		<method-name>*</method-name>
        	</method>
            <method>
        		<ejb-name>InvoiceLoader</ejb-name>
        		<method-intf>Remote</method-intf>
        		<method-name>*</method-name>
        	</method>
        	<method>
        		<ejb-name>SaleCron</ejb-name>
        		<method-intf>Remote</method-intf>
        		<method-name>*</method-name>
        	</method>
        	<method>
            <ejb-name>RoutingAddressLoadListener</ejb-name>
            <method-name>*</method-name>
          </method>
        	<trans-attribute>Required</trans-attribute>
        </container-transaction>        
    </assembly-descriptor>
    
    
</ejb-jar>
