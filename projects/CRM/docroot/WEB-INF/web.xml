<?xml version='1.0' encoding='UTF-8'?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5" id="CRM">
  <description></description>
  <display-name>FreshDirect CRM</display-name>  
  <filter>
    <description>Monitors the execution time FDWebSite Requests</description>
    <display-name>FDWebSite Request Monitor</display-name>
    <filter-name>CrmMonitor</filter-name>
    <filter-class>com.freshdirect.framework.monitor.WebRequestMonitor</filter-class>
  </filter>
  <filter>
    <description>This Filter makes sure that the customer and case are in session and they match</description>
    <display-name>CrmCaseAndCustomerFilter</display-name>
    <filter-name>CrmCaseAndCustomerFilter</filter-name>
    <filter-class>com.freshdirect.webapp.crm.CrmCaseAndCustomerFilter</filter-class>
    <init-param>
      <param-name>redirectPage</param-name>
      <param-value>/main/error_cust_case_mismatch.jsp</param-value>
    </init-param>
    <init-param>
      <param-name>lockedDirs</param-name>
      <param-value>/checkout;/customer_account</param-value>
    </init-param>
  </filter>
  <filter>
    <description>This filter makes sure that we have agent in session</description>
    <display-name>CrmLoginFilter</display-name>
    <filter-name>CrmLoginFilter</filter-name>
    <filter-class>com.freshdirect.webapp.crm.CrmLoginFilter</filter-class>
<!--        <init-param>-->
<!--            <param-name>allowedPage</param-name>-->
<!--            <param-value>/index.jsp;/promo_publish</param-value>-->
<!--        </init-param>-->
<!--        <init-param>-->
<!--            <param-name>adminDir</param-name>-->
<!--            <param-value>/user_mgmt</param-value>-->
<!--        </init-param>-->
<!--        <init-param>-->
<!--            <param-name>supervisorDir</param-name>-->
<!--            <param-value>/supervisor</param-value>-->
<!--        </init-param>-->
<!--        <init-param>-->
<!--            <param-name>monitorDir</param-name>-->
<!--            <param-value>/case_mgmt</param-value>-->
<!--        </init-param>-->
<!--        <init-param>-->
<!--            <param-name>promotionDir</param-name>-->
<!--            <param-value>/promotion</param-value>-->
<!--        </init-param>-->
    <init-param>
      <param-name>noAuthPage</param-name>
      <param-value>/no_auth.jsp</param-value>
    </init-param>
  </filter>
  <filter>
    <description>This filter creates availability horizon and today's date as threadlocal</description>
    <display-name>OncePerRequestDateFilter</display-name>
    <filter-name>OncePerRequestDateFilter</filter-name>
    <filter-class>com.freshdirect.webapp.filters.OncePerRequestDateFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>CrmMonitor</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>CrmCaseAndCustomerFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>CrmLoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>OncePerRequestDateFilter</filter-name>
    <url-pattern>/order/*</url-pattern>
  </filter-mapping>
  <servlet>
    <servlet-name>com.freshdirect.webapp.util.json.FDJSONRPCServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.json.FDJSONRPCServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>JSONRPCServlet</servlet-name>
    <servlet-class>com.metaparadigm.jsonrpc.JSONRPCServlet</servlet-class>
    <init-param>
      <param-name>auto-session-bridge</param-name>
      <param-value>0</param-value>
    </init-param>
  </servlet>
  <servlet>
    <servlet-name>SignatureServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.SignatureServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>ReSendEmailConfirmationServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ReSendEmailConfirmationServlet</servlet-class>
  </servlet>
   <servlet>
    <servlet-name>AddressScrubbingServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.AddressScrubbingServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>ScrubbedCSVReportServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ScrubbedCSVReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>SignatureViewServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.SignatureViewServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>WorkflowImage</servlet-name>
    <servlet-class>com.freshdirect.webapp.crm.WorkflowImageServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>LateDeliveryExcelReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ExcelReportServletLateDelivery</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>ReservationsReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ReservationsReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersByReservationsReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersForResvReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersCancelledReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersCancelledReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersReturnedReportServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersReturnedReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>ReturnsVSExportServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ReturnsVSExportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>ReturnsSPExportServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.ReturnsSPExportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersModifiedReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersModifiedReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersModifiedFailedReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersModifiedFailedReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>OrdersModifiedCompletedReport</servlet-name>
    <servlet-class>com.freshdirect.webapp.util.OrdersModifiedCompletedReportServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>PromoPublishServlet</servlet-name>
    <servlet-class>com.freshdirect.fdstore.promotion.pxp.PromoPublishServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>FeedPublishServlet</servlet-name>
    <servlet-class>com.freshdirect.fdstore.cms.FeedPublishServlet</servlet-class>
  </servlet>
  <servlet>
    <servlet-name>JavascriptServlet</servlet-name>
    <servlet-class>net.jawr.web.servlet.JawrServlet</servlet-class>
    <init-param>
      <param-name>configLocation</param-name>
      <param-value>/com/freshdirect/webapp/config/jawr.properties</param-value>
    </init-param>
    <init-param>
      <param-name>mapping</param-name>
      <param-value>/jawr/js/</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>CssServlet</servlet-name>
    <servlet-class>net.jawr.web.servlet.JawrServlet</servlet-class>
    <init-param>
      <param-name>configLocation</param-name>
      <param-value>/com/freshdirect/webapp/config/jawr.properties</param-value>
    </init-param>
    <init-param>
      <param-name>mapping</param-name>
      <param-value>/jawr/css/</param-value>
    </init-param>
    <init-param>
      <param-name>type</param-name>
      <param-value>css</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
   <servlet>
    <servlet-name>skuReplaceServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.ajax.standingorder.SkuReplacementServlet</servlet-class>
  </servlet> 
  <servlet>
    <servlet-name>excelExportServlet</servlet-name>
    <servlet-class>com.freshdirect.webapp.ajax.standingorder.ExcelExportServlet</servlet-class>
  </servlet> 
  
  
  <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>com.freshdirect.cms.configuration com.freshdirect.storeapi.configuration</param-value>
    </context-param>
    
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>fdlogistics</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/fdlogistics-servlet.xml</param-value>
    </init-param>
    <init-param>
            <param-name>throwExceptionIfNoHandlerFound</param-name>
            <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>fdlogistics</servlet-name>
    <url-pattern>/fdlogistics/*</url-pattern>
  </servlet-mapping>
  
  <!-- END  Logistics Integration Configuration -->
  
  
  <servlet-mapping>
    <servlet-name>JavascriptServlet</servlet-name>
    <url-pattern>/jawr/js/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>CssServlet</servlet-name>
    <url-pattern>/jawr/css/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>com.freshdirect.webapp.util.json.FDJSONRPCServlet</servlet-name>
    <url-pattern>/api/json-rpc.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>JSONRPCServlet</servlet-name>
    <url-pattern>/api/message.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>SignatureServlet</servlet-name>
    <url-pattern>/api/signature.jsp</url-pattern>
  </servlet-mapping>
   <servlet-mapping>
    <servlet-name>AddressScrubbingServlet</servlet-name>
    <url-pattern>/addressscrubbing.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ScrubbedCSVReportServlet</servlet-name>
    <url-pattern>/scrubbedCSVReport.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>SignatureViewServlet</servlet-name>
    <url-pattern>/api/viewsignature.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ReSendEmailConfirmationServlet</servlet-name>
    <url-pattern>/api/ReSendEmail.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>WorkflowImage</servlet-name>
    <url-pattern>/images/workflow.png</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>LateDeliveryExcelReport</servlet-name>
    <url-pattern>/reports/late_delivery_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ReservationsReport</servlet-name>
    <url-pattern>/reports/reservations_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersByReservationsReport</servlet-name>
    <url-pattern>/reports/orders_by_reservations_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersCancelledReport</servlet-name>
    <url-pattern>/reports/final_cancel_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersReturnedReportServlet</servlet-name>
    <url-pattern>/reports/final_return_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ReturnsVSExportServlet</servlet-name>
    <url-pattern>/reports/returnsVSExport</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>ReturnsSPExportServlet</servlet-name>
    <url-pattern>/reports/returnsSPExport</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersModifiedReport</servlet-name>
    <url-pattern>/reports/orders_to_modify_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersModifiedFailedReport</servlet-name>
    <url-pattern>/reports/orders_modified_failed_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>OrdersModifiedCompletedReport</servlet-name>
    <url-pattern>/reports/orders_modified_completed_report.xls</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>PromoPublishServlet</servlet-name>
    <url-pattern>/promo_publish</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>FeedPublishServlet</servlet-name>
    <url-pattern>/feed_publish</url-pattern>
  </servlet-mapping>
   <servlet-mapping>
    <servlet-name>skuReplaceServlet</servlet-name>
    <url-pattern>/api/skuReplaceServlet</url-pattern>
  </servlet-mapping> 
  <servlet-mapping>
    <servlet-name>excelExportServlet</servlet-name>
    <url-pattern>/api/excelExportServlet</url-pattern>
  </servlet-mapping>
  	<servlet>
		<servlet-name>StandingOrderAlternateDateServlet</servlet-name>
		<servlet-class>com.freshdirect.webapp.ajax.standingorder.StandingOrderAlternateDateServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>StandingOrderAlternateDateServlet</servlet-name>
		<url-pattern>/api/soalternatedate/*</url-pattern>
	</servlet-mapping>
  <session-config>
    <session-timeout>15</session-timeout>
  </session-config>
  <welcome-file-list>
    <welcome-file>/main/main_index.jsp</welcome-file>
  </welcome-file-list>
  <error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/main/error.jsp</location>
  </error-page>
  <error-page>
    <error-code>500</error-code>
    <location>/main/error.jsp</location>
  </error-page>
  <error-page>
    <error-code>404</error-code>
    <location>/main/error.jsp</location>
  </error-page>
  <error-page>
    <error-code>403</error-code>
    <location>/no_auth.jsp</location>
  </error-page>
  <jsp-config>
    <taglib>
      <taglib-uri>template</taglib-uri>
      <taglib-location>/WEB-INF/shared/tld/struts-template.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>logic</taglib-uri>
      <taglib-location>/WEB-INF/shared/tld/struts-logic.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>freshdirect</taglib-uri>
      <taglib-location>/WEB-INF/shared/tld/freshdirect.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>crm</taglib-uri>
      <taglib-location>/WEB-INF/tld/crm.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>html</taglib-uri>
      <taglib-location>/WEB-INF/shared/tld/struts-html.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>bean</taglib-uri>
      <taglib-location>/WEB-INF/shared/tld/struts-bean.tld</taglib-location>
    </taglib>
  </jsp-config>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>Unrestricted</web-resource-name>
      <description>All users can view</description>
      <url-pattern>/media_stat/*</url-pattern>
      <url-pattern>/media/*</url-pattern>
      <url-pattern>/kbit/*</url-pattern>
      <url-pattern>/assets/*</url-pattern>
      <url-pattern>/ccassets/*</url-pattern>
      <url-pattern>/resource/*</url-pattern>
      <url-pattern>/api/*</url-pattern>
      <url-pattern>/fdlogistics/*</url-pattern>
      <url-pattern>/images/*</url-pattern>
      <url-pattern>/login.jsp</url-pattern>
      <url-pattern>/no_auth.jsp</url-pattern>
      <url-pattern>/main/error.jsp</url-pattern>
      <url-pattern>/promo_publish</url-pattern>
      <url-pattern>/feed_publish</url-pattern>
      <url-pattern>/admin_service</url-pattern>
      <http-method>POST</http-method>
      <http-method>GET</http-method>
      <http-method>PUT</http-method>
    </web-resource-collection>
  </security-constraint>
  <security-constraint>
    <display-name></display-name>
    <web-resource-collection>
      <web-resource-name>CRM</web-resource-name>
      <description>Security Constraints for CRM</description>
      <url-pattern>/*</url-pattern>
      <http-method>POST</http-method>
      <http-method>GET</http-method>
      <http-method>PUT</http-method>
      <http-method>DELETE</http-method>
    </web-resource-collection>
    <auth-constraint>
      <description>Security Constraints for CRM</description>
      <role-name>CRM_Administrator</role-name>
      <role-name>CRM_Developer</role-name>
      <role-name>CRM_QA</role-name>
      <role-name>CRM_ETS</role-name>
      <role-name>CRM_Supervisor</role-name>
      <role-name>CRM_MarketingOperations</role-name>
      <role-name>CRM_COS</role-name>
      <role-name>CRM_Transportation</role-name>
      <role-name>CRM_OperationsCenter</role-name>
      <role-name>CRM_SeniorOperationsCenter</role-name>
      <role-name>CRM_Finance</role-name>
      <role-name>CRM_NewAgent</role-name>
      <role-name>CRM_Agent</role-name>
      <role-name>CRM_SeniorAgent</role-name>
      <role-name>CRM_Business</role-name>
      <role-name>CRM_Security</role-name>
      <role-name>CRM_ERP</role-name>
      <role-name>CRM_System</role-name>
      <role-name>CRM_TransportationSupervisor</role-name>
      <role-name>CRM_HR</role-name>
      <role-name>CRM_FDX</role-name>
    </auth-constraint>
    <user-data-constraint>
      <description>SSL not required</description>
      <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
  </security-constraint>
  <login-config>
    <auth-method>FORM</auth-method>
    <realm-name>FreshDirect</realm-name>
    <form-login-config>
      <form-login-page>/login.jsp</form-login-page>
      <form-error-page>/login.jsp</form-error-page>
    </form-login-config>
  </login-config>
  <security-role>
    <description>CRM Administrator</description>
    <role-name>CRM_Administrator</role-name>
  </security-role>
  <security-role>
    <description>CRM_Developer</description>
    <role-name>CRM_Developer</role-name>
  </security-role>
  <security-role>
    <description>CRM_QA</description>
    <role-name>CRM_QA</role-name>
  </security-role>
  <security-role>
    <description>CRM_ETS</description>
    <role-name>CRM_ETS</role-name>
  </security-role>
  <security-role>
    <description>CRM_Supervisor</description>
    <role-name>CRM_Supervisor</role-name>
  </security-role>
  <security-role>
    <description>CRM_MarketingOperations</description>
    <role-name>CRM_MarketingOperations</role-name>
  </security-role>
  <security-role>
    <description>CRM_COS</description>
    <role-name>CRM_COS</role-name>
  </security-role>
  <security-role>
    <description>CRM_Transportation</description>
    <role-name>CRM_Transportation</role-name>
  </security-role>
  <security-role>
    <description>CRM_OperationsCenter</description>
    <role-name>CRM_OperationsCenter</role-name>
  </security-role>
  <security-role>
    <description>CRM_SeniorOperationsCenter</description>
    <role-name>CRM_SeniorOperationsCenter</role-name>
  </security-role>
  <security-role>
    <description>CRM_Finance</description>
    <role-name>CRM_Finance</role-name>
  </security-role>
  <security-role>
    <description>CRM_NewAgent</description>
    <role-name>CRM_NewAgent</role-name>
  </security-role>
  <security-role>
    <description>CRM_Agent</description>
    <role-name>CRM_Agent</role-name>
  </security-role>
  <security-role>
    <description>CRM_SeniorAgent</description>
    <role-name>CRM_SeniorAgent</role-name>
  </security-role>
  <security-role>
    <description>CRM_Business</description>
    <role-name>CRM_Business</role-name>
  </security-role>
  <security-role>
    <description>CRM_Security</description>
    <role-name>CRM_Security</role-name>
  </security-role>
  <security-role>
    <description>CRM_ERP</description>
    <role-name>CRM_ERP</role-name>
  </security-role>
  <security-role>
    <description>CRM_System</description>
    <role-name>CRM_System</role-name>
  </security-role>
  <security-role>
    <description>CRM_TransportationSupervisor</description>
    <role-name>CRM_TransportationSupervisor</role-name>
  </security-role>
  <security-role>
    <description>CRM_HR</description>
    <role-name>CRM_HR</role-name>
  </security-role>
  <security-role>
    <description>CRM_FDX</description>
    <role-name>CRM_FDX</role-name>
  </security-role> 
</web-app>
